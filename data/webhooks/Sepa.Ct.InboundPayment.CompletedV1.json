{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "SepaCtInboundPaymentCompleted",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "PaymentId",
    "EndToEndIdentification",
    "InstructedAmount",
    "Debtor",
    "Creditor",
    "DebtorAccount",
    "CreditorAccount",
    "TransactionId"
  ],
  "properties": {
    "PaymentId": {
      "type": "string",
      "description": "ClearBank identifier that uniquely identifies the payment instruction.",
      "maxLength": 36,
      "minLength": 36,
      "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
    },
    "EndToEndIdentification": {
      "type": "string",
      "description": "End to end ID assigned by the originating party.",
      "maxLength": 35,
      "minLength": 1
    },
    "InstructedAmount": {
      "description": "A number of monetary units specified in an active or a historic currency where the unit of currency is explicit and compliant with ISO 4217.",
      "oneOf": [
        {
          "$ref": "#/definitions/InstructedAmount"
        }
      ]
    },
    "Debtor": {
      "description": "Party that owes an amount of money to the (ultimate) creditor.",
      "oneOf": [
        {
          "$ref": "#/definitions/Debtor"
        }
      ]
    },
    "Creditor": {
      "description": "Party that is owed an amount of money.",
      "oneOf": [
        {
          "$ref": "#/definitions/Creditor"
        }
      ]
    },
    "DebtorAccount": {
      "$ref": "#/definitions/DebtorAccountIdentification"
    },
    "CreditorAccount": {
      "$ref": "#/definitions/CreditorAccountIdentification"
    },
    "TransactionId": {
      "type": "string",
      "description": "The ID of the credit transaction associated with this inbound payment.",
      "format": "guid",
      "minLength": 1
    }
  },
  "definitions": {
    "InstructedAmount": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Currency"
      ],
      "properties": {
        "Amount": {
          "type": "number",
          "format": "decimal"
        },
        "Currency": {
          "type": "string",
          "minLength": 1,
          "pattern": "^[A-Z]{3}$"
        }
      }
    },
    "Debtor": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Name",
        "PostalAddress"
      ],
      "properties": {
        "Name": {
          "type": "string",
          "description": "The name used to identify the legal owner of the account from which to debit funds.",
          "maxLength": 140,
          "minLength": 1
        },
        "PostalAddress": {
          "description": "Debtor address that locates and identifies a specific address, as defined by postal services.",
          "oneOf": [
            {
              "$ref": "#/definitions/PartyAddressDetails"
            }
          ]
        }
      }
    },
    "PartyAddressDetails": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "BuildingNumber": {
          "type": [
            "null",
            "string"
          ],
          "description": "Number that identifies the position of a building on a street.",
          "maxLength": 16,
          "minLength": 1
        },
        "BuildingName": {
          "type": [
            "null",
            "string"
          ],
          "description": "Name of the building or house.",
          "maxLength": 35,
          "minLength": 1
        },
        "StreetName": {
          "type": [
            "null",
            "string"
          ],
          "description": "Name of a street or thoroughfare.",
          "maxLength": 70,
          "minLength": 1
        },
        "TownName": {
          "type": [
            "null",
            "string"
          ],
          "description": "Name of a built-up area, with defined boundaries, and a local government.",
          "maxLength": 35,
          "minLength": 1
        },
        "Country": {
          "type": [
            "null",
            "string"
          ],
          "description": "Nation with its own government.",
          "pattern": "[A-Z]{2,2}"
        },
        "PostCode": {
          "type": [
            "null",
            "string"
          ],
          "description": "Identifier consisting of a group of letters and/or numbers that is added to a postal address to assist the sorting of mail.",
          "maxLength": 16,
          "minLength": 1
        }
      }
    },
    "Creditor": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Name",
        "PostalAddress"
      ],
      "properties": {
        "Name": {
          "type": "string",
          "description": "The name used to identify the legal owner of the account from which to credit funds.",
          "maxLength": 140,
          "minLength": 1
        },
        "PostalAddress": {
          "description": "Creditor address that locates and identifies a specific address, as defined by postal services.",
          "oneOf": [
            {
              "$ref": "#/definitions/PartyAddressDetails"
            }
          ]
        }
      }
    },
    "DebtorAccountIdentification": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Iban"
      ],
      "properties": {
        "Iban": {
          "type": "string",
          "description": "International Bank Account Number associated with the debtor account to which a debit entry will be made as a result of the transaction.",
          "minLength": 1,
          "pattern": "[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}"
        }
      }
    },
    "CreditorAccountIdentification": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Iban"
      ],
      "properties": {
        "Iban": {
          "type": "string",
          "description": "International Bank Account Number associated with the creditor account to which a credit entry will be made as a result of the transaction.",
          "minLength": 1,
          "pattern": "[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}"
        }
      }
    }
  }
}