{
  "openapi": "3.0.1",
  "info": {
    "title": "SEPA CT UK",
    "description": "SEPA CT UK",
    "version": "1.0-SEPA-CT-UK"
  },
  "paths": {
    "/api/v2/payments": {
      "post": {
        "tags": [
          "Payments"
        ],
        "summary": "You can use this endpoint to send euro payments via SEPA Credit Transfer.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Your API token, retrieved from the ClearBank portal.",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "DigitalSignature",
            "in": "header",
            "description": "Signed hash of the body of the request. The hash is signed by your private key.",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "X-Request-Id",
            "in": "header",
            "description": "A unique identifier for the request; valid for 24 hours, max length 83.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Mccy Payment Orchestrator External Api V2",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PaymentRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/PaymentRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/PaymentRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Accepted",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Content",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AmountType": {
        "required": [
          "amount",
          "currency"
        ],
        "type": "object",
        "properties": {
          "amount": {
            "multipleOf": 0.01,
            "maximum": 999999999.99,
            "minimum": 0,
            "exclusiveMinimum": true,
            "type": "number",
            "format": "double",
            "example": 9503.52
          },
          "currency": {
            "maxLength": 3,
            "minLength": 3,
            "type": "string",
            "description": "The ISO 4217 currency code of this transaction. This should always be \"EUR\".",
            "example": "EUR"
          }
        },
        "additionalProperties": false
      },
      "BranchAndFinancialInstitutionIdentification": {
        "type": "object",
        "properties": {
          "bicfi": {
            "maxLength": 11,
            "minLength": 8,
            "pattern": "[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9]{2,2}([A-Z0-9]{3,3}){0,1}",
            "type": "string",
            "description": "Code allocated to a financial institution as described in ISO 9362.",
            "nullable": true,
            "example": "AB12GBCD34AAA"
          }
        },
        "additionalProperties": false
      },
      "CashAccount": {
        "type": "object",
        "properties": {
          "iban": {
            "type": "string",
            "description": "A code used to uniquely identify the account of a customer at a financial institution as described in the 2007 edition of the ISO 13616 standard.",
            "nullable": true,
            "example": "GB13CBAB1122331234567"
          }
        },
        "additionalProperties": false,
        "description": "Either IBAN or AccountIdentification must be provided, but not both."
      },
      "CreditTransferTransaction": {
        "required": [
          "creditor",
          "creditorAccount",
          "creditorAgent",
          "instructedAmount",
          "paymentIdentification",
          "paymentTypeInformation"
        ],
        "type": "object",
        "properties": {
          "paymentIdentification": {
            "$ref": "#/components/schemas/PaymentIdentification"
          },
          "paymentTypeInformation": {
            "$ref": "#/components/schemas/PaymentTypeInformation"
          },
          "instructedAmount": {
            "$ref": "#/components/schemas/AmountType"
          },
          "creditorAgent": {
            "$ref": "#/components/schemas/BranchAndFinancialInstitutionIdentification"
          },
          "creditor": {
            "type": "object",
            "description": "The creditor's organisation or private details",
            "oneOf": [
              {
                "$ref": "#/components/schemas/organisationPartyIdentification"
              },
              {
                "$ref": "#/components/schemas/privatePartyIdentification"
              }
            ]
          },
          "creditorAccount": {
            "$ref": "#/components/schemas/CashAccount"
          },
          "remittanceInformation": {
            "$ref": "#/components/schemas/RemittanceInformation"
          }
        },
        "additionalProperties": false
      },
      "OrganisationIdentification": {
        "type": "object",
        "properties": {
          "anyBIC": {
            "maxLength": 11,
            "minLength": 8,
            "pattern": "[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9]{2,2}([A-Z0-9]{3,3}){0,1}",
            "type": "string",
            "description": "Code allocated to a financial institution as described in ISO 9362.",
            "nullable": true,
            "example": "AB12GB1A123"
          }
        },
        "additionalProperties": false
      },
      "organisationPartyIdentification": {
        "required": [
          "name"
        ],
        "type": "object",
        "properties": {
          "name": {
            "maxLength": 140,
            "minLength": 1,
            "type": "string",
            "example": "Pinto Corporation"
          },
          "postalAddress": {
            "$ref": "#/components/schemas/PostalAddress"
          },
          "organisationIdentification": {
            "$ref": "#/components/schemas/OrganisationIdentification"
          }
        },
        "additionalProperties": false
      },
      "privatePartyIdentification": {
        "required": [
          "name"
        ],
        "type": "object",
        "properties": {
          "name": {
            "maxLength": 140,
            "minLength": 1,
            "type": "string",
            "example": "Elias Pinto"
          },
          "postalAddress": {
            "$ref": "#/components/schemas/PostalAddress"
          },
          "privateIdentification": {
            "$ref": "#/components/schemas/PersonIdentification"
          }
        },
        "additionalProperties": false
      },
      "PaymentIdentification": {
        "required": [
          "endToEndIdentification",
          "instructionIdentification",
          "uetr"
        ],
        "type": "object",
        "properties": {
          "instructionIdentification": {
            "maxLength": 35,
            "minLength": 1,
            "type": "string",
            "example": "i5gdyVa8qnoOBGveXEuNHo9lvAqdPyAd4tK"
          },
          "endToEndIdentification": {
            "maxLength": 35,
            "minLength": 1,
            "type": "string",
            "example": "GcP5LyftYyLPNa4OQ5bZThRTlSZPCR7GbR2"
          },
          "uetr": {
            "minLength": 1,
            "pattern": "[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}",
            "type": "string",
            "description": "Universally Unique Identifier (UUID) version 4, as described in IETC RFC 4122.",
            "example": "2199f959-77ef-5fa0-9580-33a8fec38f0d"
          }
        },
        "additionalProperties": false
      },
      "PaymentInstruction": {
        "required": [
          "creditTransferTransactionInformation",
          "debtor",
          "debtorAccount",
          "paymentInformationIdentification"
        ],
        "type": "object",
        "properties": {
          "paymentInformationIdentification": {
            "maxLength": 35,
            "minLength": 1,
            "type": "string",
            "description": "Unique identification to unambiguously identify the payment.",
            "example": "rJawA91MHPLoMU89AG0HpobF1Vo7zOzcQVG"
          },
          "requestedExecutionDate": {
            "type": "string",
            "description": "Must be today's date, formatted as YYYY-MM-DD.",
            "format": "date",
            "nullable": true,
            "example": "2025-11-13"
          },
          "debtor": {
            "type": "object",
            "description": "The debtor's organisation or private details.",
            "oneOf": [
              {
                "$ref": "#/components/schemas/organisationPartyIdentification"
              },
              {
                "$ref": "#/components/schemas/privatePartyIdentification"
              }
            ]
          },
          "debtorAccount": {
            "$ref": "#/components/schemas/CashAccount"
          },
          "creditTransferTransactionInformation": {
            "maxItems": 100,
            "minItems": 1,
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CreditTransferTransaction"
            }
          }
        },
        "additionalProperties": false
      },
      "PaymentRequest": {
        "required": [
          "messageIdentification",
          "paymentInformation"
        ],
        "type": "object",
        "properties": {
          "messageIdentification": {
            "maxLength": 35,
            "minLength": 1,
            "type": "string",
            "description": "Unique identifier for the message.",
            "example": "RP6lJxMpuC4cWJ18OUR4SCfWF8zm5CiBweT"
          },
          "paymentInformation": {
            "maxItems": 3,
            "minItems": 1,
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PaymentInstruction"
            }
          }
        },
        "additionalProperties": false
      },
      "PaymentResponse": {
        "required": [
          "messageIdentification"
        ],
        "type": "object",
        "properties": {
          "messageIdentification": {
            "maxLength": 35,
            "minLength": 1,
            "type": "string",
            "description": "Unique identifier for the message.",
            "example": "RP6lJxMpuC4cWJ18OUR4SCfWF8zm5CiBweT"
          }
        },
        "additionalProperties": false
      },
      "PaymentTypeInformation": {
        "type": "object",
        "properties": {
          "serviceLevelCode": {
            "maxLength": 4,
            "minLength": 1,
            "enum": [
              "SEPA"
            ],
            "type": "string",
            "description": "Follows the latest version of the External Code Set, available at www.iso20022.org.",
            "nullable": true,
            "example": "SEPA"
          }
        },
        "additionalProperties": false
      },
      "PersonIdentification": {
        "required": [
          "birthDate",
          "cityOfBirth",
          "countryOfBirth"
        ],
        "type": "object",
        "properties": {
          "birthDate": {
            "minLength": 1,
            "type": "string",
            "description": "Formatted as YYYY-MM-DD, in alignment with the ISO 8601 standard.",
            "format": "date",
            "example": "1985-10-27"
          },
          "cityOfBirth": {
            "maxLength": 35,
            "minLength": 1,
            "type": "string",
            "example": "Bournemouth",
            "description": "The person's city of birth."
          },
          "countryOfBirth": {
            "maxLength": 2,
            "minLength": 2,
            "pattern": "[A-Z]{2,2}",
            "type": "string",
            "description": "The person's country of birth, given as a ISO 3166-1 Alpha-2 standard country code.",
            "example": "GB"
          }
        },
        "additionalProperties": false
      },
      "PostalAddress": {
        "required": [
          "country",
          "postCode",
          "townName"
        ],
        "type": "object",
        "properties": {
          "streetName": {
            "maxLength": 70,
            "minLength": 1,
            "type": "string",
            "nullable": true,
            "example": "Long Road",
            "description": "The name of the street at this address."
          },
          "buildingNumber": {
            "maxLength": 16,
            "minLength": 1,
            "type": "string",
            "nullable": true,
            "example": "72",
            "description": "The building name at this address."
          },
          "postCode": {
            "maxLength": 16,
            "minLength": 1,
            "type": "string",
            "example": "CA3 9TD",
            "description": "The post code of this address."
          },
          "townName": {
            "maxLength": 35,
            "minLength": 1,
            "type": "string",
            "example": "Carlisle",
            "description": "The town name of this address."
          },
          "countrySubdivision": {
            "maxLength": 35,
            "minLength": 1,
            "type": "string",
            "nullable": true,
            "example": "Cumberland",
            "description": "This can be the county or other distinct region within a country."
          },
          "country": {
            "maxLength": 2,
            "minLength": 2,
            "pattern": "[A-Z]{2,2}",
            "type": "string",
            "description": "Country code following the ISO 3166-1 Alpha-2 standard.",
            "example": "GB"
          }
        },
        "additionalProperties": false
      },
      "ProblemDetails": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "nullable": true,
            "description": "A URI reference [RFC3986] that identifies the problem type. This specification encourages that, when dereferenced, it provides human-readable documentation for the problem type (e.g., using HTML [W3C.REC-html5-20141028]). When this member is not present, its value is assumed to be \"about:blank\"."
          },
          "title": {
            "type": "string",
            "nullable": true,
            "example": "A short, human-readable summary of the problem type. It SHOULD NOT change from occurrence to occurrence of the problem, except for purposes of localization (e.g., using proactive content negotiation; see[RFC7231], Section 3.4)."
          },
          "status": {
            "type": "integer",
            "format": "int32",
            "nullable": true,
            "example": "The HTTP status code ([RFC7231], Section 6) generated by the origin server for this occurrence of the problem."
          },
          "detail": {
            "type": "string",
            "nullable": true,
            "example": "A human-readable explanation specific to this occurrence of the problem."
          },
          "instance": {
            "type": "string",
            "nullable": true,
            "example": "A URI reference that identifies the specific occurrence of the problem. It may or may not yield further information if dereferenced."
          }
        },
        "additionalProperties": {}
      },
      "RemittanceInformation": {
        "type": "object",
        "properties": {
          "unstructured": {
            "maxLength": 140,
            "minLength": 1,
            "maxItems": 3,
            "minItems": 0,
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "A maximum of 1 item can be supplied when Service Level Code is 'SEPA'",
            "nullable": true,
            "example": "My unstructured remittance information."
          }
        },
        "additionalProperties": false
      }
    }
  }
}