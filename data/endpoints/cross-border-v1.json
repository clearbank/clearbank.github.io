{
  "openapi": "3.0.1",
  "info": {
    "title": "ClearBank.Chaps.Rtgs.Api",
    "version": "1.0GBPCrossBorder"
  },
  "paths": {
    "/payments/cross-border-sterling/v1/payments": {
      "post": {
        "description": "This endpoint will send a cross-border customer payment in sterling (pacs.008).",
        "operationId": "ExternalCrossBorderCreateCustomerPayment-v4",
        "parameters": [
          {
            "$ref": "#/components/parameters/ParametersOpenapi_Authorization"
          },
          {
            "$ref": "#/components/parameters/ParametersOpenapi_DigitalSignature"
          },
          {
            "$ref": "#/components/parameters/ParametersOpenapi_RequestIdentifier"
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCrossBorderCustomerPaymentDtoV4"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCrossBorderCustomerPaymentDtoV4"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCrossBorderCustomerPaymentDtoV4"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCrossBorderCustomerPaymentDtoV4"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Accepted",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentCreatedResponseDtoV4"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentCreatedResponseDtoV4"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaymentCreatedResponseDtoV4"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                  "schema": {
                      "$ref": "#/components/schemas/ProblemDetails"
                  }
              }
          }
          }
        }
      }
    }
  },
  "components": {
    "parameters": {
      "ParametersOpenapi_Authorization": {
        "name": "Authorization",
        "in": "header",
        "description": "Your API token retrieved from the ClearBank portal.",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/ApiHeadersSchema_AuthorizationType"
        }
      },
      "ParametersOpenapi_DigitalSignature": {
        "name": "DigitalSignature",
        "in": "header",
        "description": "Signed hash of the body of the request. The hash is signed by your private key.",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/ApiHeadersSchema_DigitalSignatureType"
        }
      },
      "ParametersOpenapi_RequestIdentifier": {
        "name": "X-Request-Id",
        "in": "header",
        "description": "A unique identifier for the request.",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/ApiHeadersSchema_RequestIdentifierType"
        }
      }
    },
    "schemas": {
      "ApiHeadersSchema_AuthorizationType": {
        "description": "Authorization header restricted to Bearer token only",
        "type": "string",
        "pattern": "^Bearer +.+"
      },
      "ApiHeadersSchema_DigitalSignatureType": {
        "description": "The digital signature generated by the API consumer",
        "type": "string"
      },
      "ApiHeadersSchema_RequestIdentifierType": {
        "description": "The request identifier supplied by the API consumer",
        "type": "string"
      },
      "AccountIdentificationDtoV4": {
        "type": "object",
        "properties": {
          "iban": {
            "minLength": 1,
            "pattern": "[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}",
            "type": "string",
            "description": "International Bank Account Number (IBAN) - identifier used internationally by financial institutions to uniquely identify the account of a customer. Further specifications of the format and content of the IBAN can be found in the standard ISO 13616 \"Banking and related financial services - International Bank Account Number (IBAN)\" version 1997-10-01, or later revisions."
          },
          "schemeName": {
            "enum": [
              "BBan",
              "Other"
            ],
            "type": "string",
            "description": "Scheme type. If this field is set to 'Other', then the proprietary field is required.",
            "example": "Other"
          },
          "proprietary": {
            "enum": [
              "SortcodeAccountNumber"
            ],
            "type": "string",
            "description": "This field must be present when schemeName is set to 'Other' and should not be present otherwise."
          },
          "identification": {
            "minLength": 1,
            "type": "string",
            "description": "Unambiguous identification for the given scheme (specified in schemeName). Set to either the BBAN (XXXX01020301234567) or the sort code and account number (01020301234567).",
            "example": "01020301234567"
          }
        },
        "additionalProperties": false
      },
      "AccountIdentificationIbanDtoV4": {
        "required": [
          "iban"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/AccountIdentificationDtoV4"
          }
        ],
        "properties": {
          "iban": {
            "description": "International Bank Account Number (IBAN) - identifier used internationally by financial institutions to uniquely identify the account of a customer. Further specifications of the format and content of the IBAN can be found in the standard ISO 13616 \"Banking and related financial services - International Bank Account Number (IBAN)\" version 1997-10-01, or later revisions.",
            "type": "string",
            "pattern": "[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}"
          }
        },
        "additionalProperties": false
      },
      "AccountIdentificationOtherDtoV4": {
        "required": [
          "identification",
          "schemeName"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/AccountIdentificationDtoV4"
          }
        ],
        "properties": {
          "schemeName": {
            "description": "Qualifier for scheme name that identifies an organisation provided as either a code or free form text.\nShould be populated based on instructions published on ClearBank Developer Portal or supplied in onboarding guide.\n",
            "type": "string",
            "minLength": 1,
            "maxLength": 35,
            "enum": [
              "BBan",
              "Other"
            ]
          },
          "proprietary": {
            "type": "string",
            "description": "Proprietary"
          },
          "identification": {
            "description": "Identification assigned by an institution.",
            "type": "string",
            "minLength": 1,
            "maxLength": 35
          }
        },
        "additionalProperties": false
      },
      "CreateCrossBorderCustomerPaymentDtoV4": {
        "required": [
          "creditor",
          "creditorAccount",
          "debtor",
          "debtorAccount",
          "endToEndIdentification",
          "instructedAmount",
          "instructionIdentification",
          "sourceAccount",
          "intermediaryAgent1"
        ],
        "type": "object",
        "properties": {
          "instructionIdentification": {
            "description": "Unique identification, as assigned by you, to unambiguously identify the payment instruction.",
            "type": "string",
            "minLength": 1,
            "maxLength": 35
          },
          "endToEndIdentification": {
            "description": "Unique identification, as assigned by the initiating party, to unambiguously identify the transaction. This identification is passed on, unchanged, throughout the entire end-to-end chain.",
            "type": "string",
            "minLength": 1,
            "maxLength": 35
          },
          "instructedAmount": {
            "$ref": "#/components/schemas/InstructionAmountDtoV4"
          },
          "sourceAccount": {
            "$ref": "#/components/schemas/AccountIdentificationDtoV4",
            "description": "The ClearBank account that will be credited or debited based on the successful completion of the payment instruction. You need to include EITHER the iban field OR the schemeName and identification fields in this object."
          },
          "debtorAccount": {
            "$ref": "#/components/schemas/AccountIdentificationDtoV4",
            "description": "Unambiguous identification of the account of the debtor to which a debit entry will be made as a result of the transaction. You need to include EITHER the iban field OR the schemeName and identification fields in this object."
          },
          "debtor": {
            "$ref": "#/components/schemas/PartyDetailsDtoV4",
            "description": "Party that owes an amount of money to the (ultimate) creditor."
          },
          "creditorAccount": {
            "$ref": "#/components/schemas/AccountIdentificationDtoV4",
            "description": "Unambiguous identification of the account of the creditor to which a credit entry will be posted as a result of the payment transaction."
          },
          "creditor": {
            "required": [
              "bic",
              "name",
              "postalAddress"
            ],
            "type": "object",
            "properties": {
              "bic": {
                "minLength": 1,
                "type": "string",
                "description": "Creditor’s Business Identifier Code (BIC)."
              },
              "name": {
                "description": "Name by which a party is known and which is usually used to identify that party.",
                "type": "string",
                "minLength": 1,
                "maxLength": 140
              },
              "postalAddress": {
                "$ref": "#/components/schemas/PartyAddressDetailsDtoV4"
              },
              "lei": {
                "description": "Legal Entity Identifier of the party.",
                "type": "string",
                "pattern": "[A-Z0-9]{18,18}[0-9]{2,2}"
              }
            },
            "additionalProperties": false,
            "description": "Party that is owed an amount of money by the (ultimate) debtor."
          },
          "purpose": {
            "description": "Underlying reason for the payment transaction, as published in an external purpose code list.",
            "type": "string",
            "minLength": 1,
            "maxLength": 35,
            "enum": [
              "Deposit",
              "IntraCompanyPayment",
              "IntraPartyPayment",
              "AgriculturalTransfer",
              "CommercialPayment",
              "PurchaseSaleOfGoodsAndServices",
              "SupplierPayment",
              "CharityPayment",
              "CompensationPayment",
              "PropertyLoanRepayment",
              "PropertyLoanSettlement",
              "PaymentOfInsuranceClaim",
              "LoanRepayment",
              "TradeSettlementPayment",
              "PaymentOfFees",
              "Gift",
              "InvoicePayment",
              "ForeignExchange",
              "Savings",
              "TaxPayment",
              "Utilities",
              "LotteryPayment",
              "PropertyCompletionPayment",
              "PropertyDeposit",
              "PropertyLoanDisbursement",
              "PropertyLoanRefinancing"
            ]
          },
          "categoryPurpose": {
            "description": "Category purpose, in a proprietary form.",
            "type": "string",
            "minLength": 1,
            "maxLength": 35,
            "enum": [
              "TradeSettlementPayment",
              "PersonToPersonPayment",
              "GovernmentPayment",
              "IntraCompanyPayment",
              "Loan",
              "OtherPayment",
              "SupplierPayment",
              "TaxPayment",
              "Trade",
              "TreasuryPayment"
            ]
          },
          "remittanceInformation": {
            "$ref": "#/components/schemas/StructuredRemittanceInformationDtoV4"
          },
          "intermediaryAgent1": {
            "$ref": "#/components/schemas/IntermediaryAgentDetailsV4"
          }
        },
        "additionalProperties": false
      },
      "CrossBorderCreditorDetailsDtoV4": {
        "required": [
          "bic",
          "name",
          "postalAddress"
        ],
        "type": "object",
        "properties": {
          "bic": {
            "minLength": 1,
            "type": "string",
            "description": "Creditor’s Business Identifier Code (BIC)."
          },
          "name": {
            "description": "Name by which a party is known and which is usually used to identify that party.",
            "type": "string",
            "minLength": 1,
            "maxLength": 140
          },
          "postalAddress": {
            "$ref": "#/components/schemas/PartyAddressDetailsDtoV4"
          },
          "lei": {
            "description": "Legal Entity Identifier of the party.",
            "type": "string",
            "pattern": "[A-Z0-9]{18,18}[0-9]{2,2}"
          }
        },
        "additionalProperties": false,
        "description": "Party to which an amount of money is due."
      },
      "CrossBorderCreditorIdentificationDtoV4": {
        "type": "object",
        "additionalProperties": false
      },
      "CrossBorderCreditorIdentificationIbanDtoV4": {
        "required": [
          "iban"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/CrossBorderCreditorIdentificationDtoV4"
          }
        ],
        "properties": {
          "iban": {
            "description": "International Bank Account Number (IBAN) - identifier used internationally by financial institutions to uniquely identify the account of a customer. Further specifications of the format and content of the IBAN can be found in the standard ISO 13616 \"Banking and related financial services - International Bank Account Number (IBAN)\" version 1997-10-01, or later revisions.",
            "type": "string",
            "pattern": "[A-Z]{2,2}[0-9]{2,2}[a-zA-Z0-9]{1,30}"
          }
        },
        "additionalProperties": false
      },
      "CrossBorderCreditorIdentificationOtherDtoV4": {
        "required": [
          "identification",
          "schemeName"
        ],
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/CrossBorderCreditorIdentificationDtoV4"
          }
        ],
        "properties": {
          "schemeName": {
            "description": "Qualifier for scheme name that identifies an organisation provided as either a code or free form text.\nShould be populated based on instructions published on ClearBank Developer Portal or supplied in onboarding guide.\n",
            "type": "string",
            "minLength": 1,
            "maxLength": 35,
            "enum": [
              "BBan",
              "Other"
            ]
          },
          "identification": {
            "description": "Identification assigned by an institution.",
            "type": "string",
            "minLength": 1,
            "maxLength": 35
          }
        },
        "additionalProperties": false
      },
      "HttpValidationProblemDetails": {
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/ProblemDetails"
          }
        ],
        "properties": {
          "errors": {
            "description": "Extension objects that describe specific problem details. Encapsulated in a named property to ensure the content can be parsed deterministically.\n",
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1,
              "uniqueItems": false
            }
          }
        },
        "additionalProperties": {}
      },
      "InstructionAmountDtoV4": {
        "required": [
          "amount",
          "currency"
        ],
        "type": "object",
        "properties": {
          "amount": {
            "type": "number"
          },
          "currency": {
            "minLength": 1,
            "type": "string",
            "description": "Set to 'GBP' as other currencies are not supported.",
            "example": "GBP"
          }
        },
        "additionalProperties": false,
        "description": "Amount of money to be moved between the debtor and creditor, before deduction of charges, expressed in the currency as ordered by the initiating party."
      },
      "IntermediaryAgentDetailsV4": {
        "required": [
          "bic",
          "name",
          "postalAddress"
        ],
        "type": "object",
        "properties": {
          "name": {
            "description": "Name by which an agent is known and which is usually used to identify that agent.",
            "type": "string",
            "minLength": 1,
            "maxLength": 140
          },
          "postalAddress": {
            "$ref": "#/components/schemas/PartyAddressDetailsDtoV4"
          },
          "bic": {
            "minLength": 1,
            "type": "string",
            "description": "Intermediary agent's Business Identifier Code (BIC)."
          },
          "lei": {
            "description": "Legal Entity Identifier of the financial institution.",
            "type": "string",
            "pattern": "[A-Z0-9]{18,18}[0-9]{2,2}"
          }
        },
        "additionalProperties": false,
        "description": "Agent between the debtor's agent and the creditor's agent. You must include the Direct Participant's information in this object."
      },
      "PartyAddressDetailsDtoV4": {
        "required": [
          "country",
          "postCode",
          "townName"
        ],
        "type": "object",
        "properties": {
          "buildingNumber": {
            "description": "Number that identifies the position of a building on a street.",
            "type": "string",
            "minLength": 1,
            "maxLength": 16
          },
          "buildingName": {
            "description": "Name of the building or house.",
            "type": "string",
            "minLength": 1,
            "maxLength": 35
          },
          "streetName": {
            "description": "Name of a street or thoroughfare.",
            "type": "string",
            "minLength": 1,
            "maxLength": 70
          },
          "townName": {
            "description": "Name of a built-up area, with defined boundaries, and a local government.",
            "type": "string",
            "minLength": 1,
            "maxLength": 35
          },
          "country": {
            "description": "Nation with its own government.",
            "type": "string",
            "pattern": "[A-Z]{2,2}"
          },
          "postCode": {
            "description": "Identifier consisting of a group of letters and/or numbers that is added to a postal address to assist the sorting of mail.",
            "type": "string",
            "minLength": 1,
            "maxLength": 16
          }
        },
        "additionalProperties": false
      },
      "PartyDetailsDtoV4": {
        "required": [
          "name",
          "postalAddress"
        ],
        "type": "object",
        "properties": {
          "name": {
            "description": "Name by which a party is known and which is usually used to identify that party.",
            "type": "string",
            "minLength": 1,
            "maxLength": 140
          },
          "postalAddress": {
            "$ref": "#/components/schemas/PartyAddressDetailsDtoV4"
          },
          "lei": {
            "description": "Legal Entity Identifier of the party.",
            "type": "string",
            "pattern": "[A-Z0-9]{18,18}[0-9]{2,2}"
          }
        },
        "additionalProperties": false
      },
      "PaymentCreatedResponseDtoV4": {
        "required": [
          "paymentId"
        ],
        "type": "object",
        "properties": {
          "paymentId": {
            "type": "string",
            "format": "uuid",
            "description": "Payment ID assigned by ClearBank. This will match the Transaction ID in the Transaction Settled webhook describing this payment."
          }
        },
        "additionalProperties": false
      },
      "ProblemDetails": {
        "description": "Properties of a given error",
        "type": "object",
        "required": [
          "type",
          "title"
        ],
        "properties": {
          "detail": {
            "description": "A human-readable description of the problem unique to the instance of the problem. The reader must be able to discern the cause of the problem from this information.\n",
            "type": "string"
          },
          "errors": {},
          "instance": {
            "description": "A URI that uniquely identifies the problem being reported. This value should be consistent and deterministic in order to promote automated processing when read in client software\n",
            "type": "string"
          },
          "status": {
            "description": "The HTTP response code returned by the API. This is returned to allow for processing by distributed software agents and MUST match that reported in the transport layer\n",
            "type": "string"
          },
          "title": {
            "description": "A short, human-readable summary of the problem type that should not change between different occurrences of a given problem",
            "type": "string"
          },
          "type": {
            "description": "A URI that uniquely identifies the problem type being reported",
            "type": "string"
          }
        }
      },
      "StructuredRemittanceInformationDtoV4": {
        "type": "object",
        "properties": {
          "creditorReferenceInformation": {
            "x-flattened-from-source-iso-type": true,
            "x-source-iso-type-name": "CreditorReferenceType2",
            "description": "Unique reference, as assigned by the creditor, to unambiguously refer to the payment transaction.\n\nUsage: If available, the initiating party should provide this reference in the structured remittance information, to enable reconciliation by the creditor upon receipt of the amount of money.\n\nIf the business context requires the use of a creditor reference or a payment remit identification, and only one identifier can be passed through the end-to-end chain, the creditor's reference or payment remittance identification should be quoted in the end-to-end transaction identification.",
            "type": "string",
            "minLength": 1,
            "maxLength": 35
          }
        },
        "additionalProperties": false,
        "description": "Information supplied to enable the matching of an entry with the items that the transfer is intended to settle, such as commercial invoices in an accounts' receivable system."
      }
    }
  }
}